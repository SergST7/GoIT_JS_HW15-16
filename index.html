<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Homework 15 - 16</title>
  <!--<link rel="stylesheet" href="css/style.css">-->
  <link rel="stylesheet" href="css/googleAPI.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/jquery-3.1.0.js"></script>
  <script src="js/lodash.js"></script>
  <script src="js/main.js"></script>
</head>
<body>
<div class="wrapper">
  <h1>Поиск от Google API</h1>

  <div class="googleAPI">
    <div id='cse' style='width: 100%;'>Loading</div>
    <script src='//www.google.com/jsapi' type='text/javascript'></script>
    <script type='text/javascript'>
      google.load('search', '1', {language: 'ru', style: google.loader.themes.SHINY});
      google.setOnLoadCallback(function() {
        var customSearchOptions = {};
        var orderByOptions = {};
        orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
        customSearchOptions['enableOrderBy'] = true;
        customSearchOptions['orderByOptions'] = orderByOptions;
        customSearchOptions['overlayResults'] = true;
        var customSearchControl =   new google.search.CustomSearchControl('000629323765220375184:kukq2rjqi8q', customSearchOptions);
        customSearchControl.setResultSetSize(google.search.Search.LARGE_RESULTSET);
        var options = new google.search.DrawOptions();
        options.setAutoComplete(true);
        customSearchControl.draw('cse', options);
      }, true);
    </script>
  </div>

  <h2>Вывод результатов с помошью шаблона</h2>

  <input type="text" id="search">
  <button class="start">Search</button>
  <div class="wrapper-search"></div>
</div>

<script type="text/template" id="resultTmpl">
  <p class="search-stat">Результатов: <span><%=searchInformation
    .formattedTotalResults%></span> (<span><%=searchInformation
    .formattedSearchTime%></span> сек)
  </p>
<ul>
  <% items.forEach(function(item, i) { %>
  <li><%=item.htmlTitle%></li>
  <% }); %>
</ul>

</script>
</body>
</html>